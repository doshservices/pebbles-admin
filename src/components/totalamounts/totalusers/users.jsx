import axios from "axios";
import { useEffect, useState } from "react";

const TotalUsers = () => {
    const [details, setDetails] = useState([]);
    const [isloading, setIsLoading] = useState(false);
    const [apiError, setApiError] = useState("");
    const usersLength = details.length;

    const users = process.env.REACT_APP_URL;
    const authToken = JSON.parse(
        localStorage.getItem("pstk")
    );
    const fetchData = async () => {
        setIsLoading(true)
        await axios
            .get(`${users}/api/users/all`, {
                headers: {
                    Authorization: `Bearer ${authToken}`,
                },
            })
            .then((res) => {
                setIsLoading(false)
                // console.log(res);
                setDetails(res.data.data.users);
            })
            .catch((err) => {
                setIsLoading(false)
                // console.log(err);
                setApiError(err.message);
            });
    };
    useEffect(() => {
        fetchData();
    }, []);

    return (
        <div>
            <div className="icon-div">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <path d="M37.931 2.75862H35.8621V2.06897C35.8621 0.931035 34.931 0 33.7931 0C32.6552 0 31.7241 0.931035 31.7241 2.06897V2.75862H28.9655V2.06897C28.9655 0.931035 28.0345 0 26.8966 0C25.7586 0 24.8276 0.931035 24.8276 2.06897V2.75862H22.069V2.06897C22.069 0.931035 21.1379 0 20 0C18.8621 0 17.931 0.931035 17.931 2.06897V2.75862H15.1724V2.06897C15.1724 0.931035 14.2414 0 13.1034 0C11.9655 0 11.0345 0.931035 11.0345 2.06897V2.75862H8.27586V2.06897C8.27586 0.931035 7.34483 0 6.2069 0C5.06897 0 4.13793 0.931035 4.13793 2.06897V2.75862H2.06897C0.931035 2.75862 0 3.68966 0 4.82759V37.931C0 39.069 0.931035 40 2.06897 40H37.931C39.069 40 40 39.069 40 37.931V4.82759C40 3.68966 39.069 2.75862 37.931 2.75862ZM1.37931 11.0345H38.6207V35.1724C38.6207 35.5517 38.3103 35.8621 37.931 35.8621H2.06897C1.68966 35.8621 1.37931 35.5517 1.37931 35.1724V11.0345ZM33.1034 2.06897C33.1034 1.68966 33.4138 1.37931 33.7931 1.37931C34.1724 1.37931 34.4828 1.68966 34.4828 2.06897V4.82759C34.4828 5.2069 34.1724 5.51724 33.7931 5.51724C33.4138 5.51724 33.1034 5.2069 33.1034 4.82759V2.06897ZM26.2069 2.06897C26.2069 1.68966 26.5172 1.37931 26.8966 1.37931C27.2759 1.37931 27.5862 1.68966 27.5862 2.06897V4.82759C27.5862 5.2069 27.2759 5.51724 26.8966 5.51724C26.5172 5.51724 26.2069 5.2069 26.2069 4.82759V2.06897ZM19.3103 2.06897C19.3103 1.68966 19.6207 1.37931 20 1.37931C20.3793 1.37931 20.6897 1.68966 20.6897 2.06897V4.82759C20.6897 5.2069 20.3793 5.51724 20 5.51724C19.6207 5.51724 19.3103 5.2069 19.3103 4.82759V2.06897ZM12.4138 2.06897C12.4138 1.68966 12.7241 1.37931 13.1034 1.37931C13.4828 1.37931 13.7931 1.68966 13.7931 2.06897V4.82759C13.7931 5.2069 13.4828 5.51724 13.1034 5.51724C12.7241 5.51724 12.4138 5.2069 12.4138 4.82759V2.06897ZM5.51724 2.06897C5.51724 1.68966 5.82759 1.37931 6.2069 1.37931C6.58621 1.37931 6.89655 1.68966 6.89655 2.06897V4.82759C6.89655 5.2069 6.58621 5.51724 6.2069 5.51724C5.82759 5.51724 5.51724 5.2069 5.51724 4.82759V2.06897ZM2.06897 4.13793H4.13793V4.82759C4.13793 5.96552 5.06897 6.89655 6.2069 6.89655C7.34483 6.89655 8.27586 5.96552 8.27586 4.82759V4.13793H11.0345V4.82759C11.0345 5.96552 11.9655 6.89655 13.1034 6.89655C14.2414 6.89655 15.1724 5.96552 15.1724 4.82759V4.13793H17.931V4.82759C17.931 5.96552 18.8621 6.89655 20 6.89655C21.1379 6.89655 22.069 5.96552 22.069 4.82759V4.13793H24.8276V4.82759C24.8276 5.96552 25.7586 6.89655 26.8966 6.89655C28.0345 6.89655 28.9655 5.96552 28.9655 4.82759V4.13793H31.7241V4.82759C31.7241 5.96552 32.6552 6.89655 33.7931 6.89655C34.931 6.89655 35.8621 5.96552 35.8621 4.82759V4.13793H37.931C38.3103 4.13793 38.6207 4.44828 38.6207 4.82759V9.65517H1.37931V4.82759C1.37931 4.44828 1.68966 4.13793 2.06897 4.13793ZM37.931 38.6207H2.06897C1.68966 38.6207 1.37931 38.3103 1.37931 37.931V37.1172C1.5931 37.1931 1.82759 37.2414 2.06897 37.2414H37.931C38.1724 37.2414 38.4069 37.1931 38.6207 37.1172V37.931C38.6207 38.3103 38.3103 38.6207 37.931 38.6207Z" fill="#F8F8F8"/>
                    <path d="M4.82759 16.552H7.58622C7.96553 16.552 8.27587 16.2416 8.27587 15.8623V13.1037C8.27587 12.7244 7.96553 12.4141 7.58622 12.4141H4.82759C4.44828 12.4141 4.13794 12.7244 4.13794 13.1037V15.8623C4.13794 16.2416 4.44828 16.552 4.82759 16.552ZM5.51725 13.7934H6.89656V15.1727H5.51725V13.7934Z" fill="#F8F8F8"/>
                    <path d="M10.3448 16.552H13.1034C13.4827 16.552 13.7931 16.2416 13.7931 15.8623V13.1037C13.7931 12.7244 13.4827 12.4141 13.1034 12.4141H10.3448C9.9655 12.4141 9.65515 12.7244 9.65515 13.1037V15.8623C9.65515 16.2416 9.9655 16.552 10.3448 16.552ZM11.0345 13.7934H12.4138V15.1727H11.0345V13.7934Z" fill="#F8F8F8"/>
                    <path d="M15.862 16.552H18.6206C19 16.552 19.3103 16.2416 19.3103 15.8623V13.1037C19.3103 12.7244 19 12.4141 18.6206 12.4141H15.862C15.4827 12.4141 15.1724 12.7244 15.1724 13.1037V15.8623C15.1724 16.2416 15.4827 16.552 15.862 16.552ZM16.5517 13.7934H17.931V15.1727H16.5517V13.7934Z" fill="#F8F8F8"/>
                    <path d="M21.3794 16.552H24.138C24.5173 16.552 24.8276 16.2416 24.8276 15.8623V13.1037C24.8276 12.7244 24.5173 12.4141 24.138 12.4141H21.3794C21 12.4141 20.6897 12.7244 20.6897 13.1037V15.8623C20.6897 16.2416 21 16.552 21.3794 16.552ZM22.069 13.7934H23.4483V15.1727H22.069V13.7934Z" fill="#F8F8F8"/>
                    <path d="M26.8966 16.552H29.6552C30.0345 16.552 30.3448 16.2416 30.3448 15.8623V13.1037C30.3448 12.7244 30.0345 12.4141 29.6552 12.4141H26.8966C26.5173 12.4141 26.2069 12.7244 26.2069 13.1037V15.8623C26.2069 16.2416 26.5173 16.552 26.8966 16.552ZM27.5862 13.7934H28.9655V15.1727H27.5862V13.7934Z" fill="#F8F8F8"/>
                    <path d="M32.4138 16.552H35.1724C35.5517 16.552 35.8621 16.2416 35.8621 15.8623V13.1037C35.8621 12.7244 35.5517 12.4141 35.1724 12.4141H32.4138C32.0345 12.4141 31.7241 12.7244 31.7241 13.1037V15.8623C31.7241 16.2416 32.0345 16.552 32.4138 16.552ZM33.1034 13.7934H34.4827V15.1727H33.1034V13.7934Z" fill="#F8F8F8"/>
                    <path d="M4.82759 22.0696H7.58622C7.96553 22.0696 8.27587 21.7592 8.27587 21.3799V18.6213C8.27587 18.242 7.96553 17.9316 7.58622 17.9316H4.82759C4.44828 17.9316 4.13794 18.242 4.13794 18.6213V21.3799C4.13794 21.7592 4.44828 22.0696 4.82759 22.0696ZM5.51725 19.311H6.89656V20.6903H5.51725V19.311Z" fill="#F8F8F8"/>
                    <path d="M10.3448 22.0696H13.1034C13.4827 22.0696 13.7931 21.7592 13.7931 21.3799V18.6213C13.7931 18.242 13.4827 17.9316 13.1034 17.9316H10.3448C9.9655 17.9316 9.65515 18.242 9.65515 18.6213V21.3799C9.65515 21.7592 9.9655 22.0696 10.3448 22.0696ZM11.0345 19.311H12.4138V20.6903H11.0345V19.311Z" fill="#F8F8F8"/>
                    <path d="M15.862 22.0696H18.6206C19 22.0696 19.3103 21.7592 19.3103 21.3799V18.6213C19.3103 18.242 19 17.9316 18.6206 17.9316H15.862C15.4827 17.9316 15.1724 18.242 15.1724 18.6213V21.3799C15.1724 21.7592 15.4827 22.0696 15.862 22.0696ZM16.5517 19.311H17.931V20.6903H16.5517V19.311Z" fill="#F8F8F8"/>
                    <path d="M21.3794 22.0696H24.138C24.5173 22.0696 24.8276 21.7592 24.8276 21.3799V18.6213C24.8276 18.242 24.5173 17.9316 24.138 17.9316H21.3794C21 17.9316 20.6897 18.242 20.6897 18.6213V21.3799C20.6897 21.7592 21 22.0696 21.3794 22.0696ZM22.069 19.311H23.4483V20.6903H22.069V19.311Z" fill="#F8F8F8"/>
                    <path d="M26.8966 22.0696H29.6552C30.0345 22.0696 30.3448 21.7592 30.3448 21.3799V18.6213C30.3448 18.242 30.0345 17.9316 29.6552 17.9316H26.8966C26.5173 17.9316 26.2069 18.242 26.2069 18.6213V21.3799C26.2069 21.7592 26.5173 22.0696 26.8966 22.0696ZM27.5862 19.311H28.9655V20.6903H27.5862V19.311Z" fill="#F8F8F8"/>
                    <path d="M32.4138 22.0696H35.1724C35.5517 22.0696 35.8621 21.7592 35.8621 21.3799V18.6213C35.8621 18.242 35.5517 17.9316 35.1724 17.9316H32.4138C32.0345 17.9316 31.7241 18.242 31.7241 18.6213V21.3799C31.7241 21.7592 32.0345 22.0696 32.4138 22.0696ZM33.1034 19.311H34.4827V20.6903H33.1034V19.311Z" fill="#F8F8F8"/>
                    <path d="M4.82759 27.5872H7.58622C7.96553 27.5872 8.27587 27.2768 8.27587 26.8975V24.1389C8.27587 23.7596 7.96553 23.4492 7.58622 23.4492H4.82759C4.44828 23.4492 4.13794 23.7596 4.13794 24.1389V26.8975C4.13794 27.2768 4.44828 27.5872 4.82759 27.5872ZM5.51725 24.8285H6.89656V26.2078H5.51725V24.8285Z" fill="#F8F8F8"/>
                    <path d="M10.3448 27.5872H13.1034C13.4827 27.5872 13.7931 27.2768 13.7931 26.8975V24.1389C13.7931 23.7596 13.4827 23.4492 13.1034 23.4492H10.3448C9.9655 23.4492 9.65515 23.7596 9.65515 24.1389V26.8975C9.65515 27.2768 9.9655 27.5872 10.3448 27.5872ZM11.0345 24.8285H12.4138V26.2078H11.0345V24.8285Z" fill="#F8F8F8"/>
                    <path d="M15.862 27.5872H18.6206C19 27.5872 19.3103 27.2768 19.3103 26.8975V24.1389C19.3103 23.7596 19 23.4492 18.6206 23.4492H15.862C15.4827 23.4492 15.1724 23.7596 15.1724 24.1389V26.8975C15.1724 27.2768 15.4827 27.5872 15.862 27.5872ZM16.5517 24.8285H17.931V26.2078H16.5517V24.8285Z" fill="#F8F8F8"/>
                    <path d="M21.3794 27.5872H24.138C24.5173 27.5872 24.8276 27.2768 24.8276 26.8975V24.1389C24.8276 23.7596 24.5173 23.4492 24.138 23.4492H21.3794C21 23.4492 20.6897 23.7596 20.6897 24.1389V26.8975C20.6897 27.2768 21 27.5872 21.3794 27.5872ZM22.069 24.8285H23.4483V26.2078H22.069V24.8285Z" fill="#F8F8F8"/>
                    <path d="M4.82759 33.1028H7.58622C7.96553 33.1028 8.27587 32.7924 8.27587 32.4131V29.6545C8.27587 29.2752 7.96553 28.9648 7.58622 28.9648H4.82759C4.44828 28.9648 4.13794 29.2752 4.13794 29.6545V32.4131C4.13794 32.7924 4.44828 33.1028 4.82759 33.1028ZM5.51725 30.3442H6.89656V31.7235H5.51725V30.3442Z" fill="#F8F8F8"/>
                    <path d="M10.3448 33.1028H13.1034C13.4827 33.1028 13.7931 32.7924 13.7931 32.4131V29.6545C13.7931 29.2752 13.4827 28.9648 13.1034 28.9648H10.3448C9.9655 28.9648 9.65515 29.2752 9.65515 29.6545V32.4131C9.65515 32.7924 9.9655 33.1028 10.3448 33.1028ZM11.0345 30.3442H12.4138V31.7235H11.0345V30.3442Z" fill="#F8F8F8"/>
                    <path d="M15.862 33.1028H18.6206C19 33.1028 19.3103 32.7924 19.3103 32.4131V29.6545C19.3103 29.2752 19 28.9648 18.6206 28.9648H15.862C15.4827 28.9648 15.1724 29.2752 15.1724 29.6545V32.4131C15.1724 32.7924 15.4827 33.1028 15.862 33.1028ZM16.5517 30.3442H17.931V31.7235H16.5517V30.3442Z" fill="#F8F8F8"/>
                    <path d="M21.3794 33.1028H24.138C24.5173 33.1028 24.8276 32.7924 24.8276 32.4131V29.6545C24.8276 29.2752 24.5173 28.9648 24.138 28.9648H21.3794C21 28.9648 20.6897 29.2752 20.6897 29.6545V32.4131C20.6897 32.7924 21 33.1028 21.3794 33.1028ZM22.069 30.3442H23.4483V31.7235H22.069V30.3442Z" fill="#F8F8F8"/>
                    <path d="M31.0345 33.1044C33.6966 33.1044 35.8621 30.9389 35.8621 28.2768C35.8621 25.6147 33.6966 23.4492 31.0345 23.4492C28.3724 23.4492 26.2069 25.6147 26.2069 28.2768C26.2069 30.9389 28.3724 33.1044 31.0345 33.1044ZM31.0345 24.8285C32.9379 24.8285 34.4828 26.3734 34.4828 28.2768C34.4828 30.1803 32.9379 31.7251 31.0345 31.7251C29.131 31.7251 27.5862 30.1803 27.5862 28.2768C27.5862 26.3734 29.131 24.8285 31.0345 24.8285Z" fill="#F8F8F8"/>
                    <path d="M30.0622 29.9805C30.2001 30.1184 30.3725 30.1805 30.5519 30.1805C30.7312 30.1805 30.9036 30.1115 31.0415 29.9805L33.1174 27.9046C33.3863 27.6356 33.3863 27.2012 33.1174 26.9322C32.8484 26.6632 32.4139 26.6632 32.145 26.9322L30.5587 28.5184L30.007 27.9667C29.7381 27.6977 29.3036 27.6977 29.0346 27.9667C28.7656 28.2356 28.7656 28.6701 29.0346 28.9391L30.076 29.9805H30.0622Z" fill="#F8F8F8"/>
                </svg>
            </div>
            <div className="details-div">
            {usersLength > 0 ? <p>{usersLength}</p> : <p style={{ fontSize: '1.1rem' }}>{apiError}</p>}
            <p>Total Users</p>
            </div>
        </div>
    )
}
export default TotalUsers;